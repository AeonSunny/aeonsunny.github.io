[{"title":"Hello World","url":"/2025/08/07/hello-world/","content":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub.\nQuick Start\nCreate a new post\n$ hexo new &quot;My New Post&quot;\nMore info: Writing\nRun server\n$ hexo server\nMore info: Server\nGenerate static files\n$ hexo generate\nMore info: Generating\nDeploy to remote sites\n$ hexo deploy\nMore info: Deployment\n"},{"title":"CSPJ2025 T4","url":"/2025/11/11/CSPJ2025-T4/","content":" P1009 [NOIP 1998 普及组] 阶乘之和\n 题目描述\n用高精度计算出 S=1!+2!+3!+⋯+n!S = 1!+2!+3! + \\cdots + n!S=1!+2!+3!+⋯+n! (n≤50n \\le 50n≤50)。\n其中!表示阶乘,定义为 n!=n×(n−1)×(n−2)×⋯×1n!=n\\times(n-1)\\times(n-2)\\times\\cdots\\times1n!=n×(n−1)×(n−2)×⋯×1。例如,5!=5×4×3×2×1=1205!=5\\times 4 \\times 3 \\times 2 \\times 1=1205!=5×4×3×2×1=120。\n 输入格式\n一个正整数 nnn。\n 输出格式\n一个正整数 SSS，表示计算结果。\n 输入输出样例 #1\n 输入 #1\n3\n 输出 #1\n9\n 说明/提示\n【数据范围】\n对于 100%100 \\%100% 的数据，1≤n≤501 \\le n \\le 501≤n≤50。\n【其他说明】\n注，《深入浅出基础篇》中使用本题作为例题，但是其数据范围只有 n≤20n \\le 20n≤20，使用书中的代码无法通过本题。\n如果希望通过本题，请继续学习第八章高精度的知识。\nNOIP1998 普及组 第二题\n"},{"title":"示例","url":"/2025/11/11/%E7%A4%BA%E4%BE%8B/","content":"记 V=max⁡i=1n{Li}\\displaystyle \\rm V = \\max_{i=1}^{n} \\left\\{L_i\\right\\}V=i=1maxn​{Li​}\n 思路1\n 对于测试点 15 ~ 20\n此时\nmax⁡i=1nLi=1\\rm \\max_{i=1}^{n} L_i =1\ni=1maxn​Li​=1\n那么只要至少选取三根即可构成多边形\n此时答案为\n2n−1−n−(n2)\\rm 2^n - 1 -  n  - {n \\choose 2}2n−1−n−(2n​)\n\n全部方案为 2n\\rm 2^n2n 减去不选取得方案 ( 方案数为 111 ) , 减去仅选一根的方案 ( 方案数为 n\\rm nn ) , 减去选取两根的方案数 ( 方案数为 (n2)\\displaystyle \\rm {n \\choose 2}(2n​) )\n\n 对于全部的测试点\n将所有木棍 排序 后考虑\n此时 Li\\rm L_iLi​ 必然为 L1∼i\\rm L_{1 \\sim i}L1∼i​ 中的最大值 , 若仅考虑 L1∼i\\rm L_{1 \\sim i}L1∼i​ 限制条件可改为 ∑j=1i−1Lj&gt;Li\\rm \\sum_{j=1}^{i-1} L_j \\gt L_i∑j=1i−1​Lj​&gt;Li​\n考虑 L1∼i\\rm L_{1 \\sim i}L1∼i​ 且一定选取 Li\\rm L_iLi​ 的合法方案数\n\n【考虑 L1∼i\\rm L_{1 \\sim i}L1∼i​ 且一定选取 Li\\rm L_iLi​ 】 等价于 【以 Li\\rm L_iLi​ 为最长木棍时的方案数】\n\n同样考虑容斥 , 即全部的方案减去不合法的方案\n\n考虑 L1∼i\\rm L_{1 \\sim i}L1∼i​ 且一定选取 Li\\rm L_iLi​ 总方案数为 2i−1\\rm 2^{i-1}2i−1 ( Li\\rm L_iLi​ 一定选取 , 而 L1∼i−1\\rm L_{1 \\sim i-1}L1∼i−1​ 可选可不选 )\n不难得出 考虑 L1∼i\\rm L_{1 \\sim i}L1∼i​ 且一定选取 Li\\rm L_iLi​ 的合法方案数 为:\n2i−1\\rm 2^{i-1}2i−1 减去 不满足长度限制的方案数 减去 选取 000 根满足长度限制的方案数 减去 选取 111 根满足长度限制的方案数 减去 选取 222 根满足长度限制的方案数\n设 dpi,j\\rm dp_{i,j}dpi,j​ 表示考虑 L1∼i\\rm L_{1 \\sim i}L1∼i​ 选取总和为 j\\rm jj 的方案数\n考虑 Li\\rm L_iLi​ 是否选取有\ndpi,j=dpi−1,j+dpi−1,j−Li\\rm dp_{i,j} = dp_{i-1,j} + dp_{i-1,j- L_i}dpi,j​=dpi−1,j​+dpi−1,j−Li​​\n那么对于 Li\\rm L_iLi​ 而言 , 不满足两倍长度限制的方案数为 ∑j=0Lidpi−1,j\\rm \\sum_{j=0}^{L_i} dp_{i-1,j}∑j=0Li​​dpi−1,j​\nnote\n\n\n选取 000 根满足长度限制的方案数为 000\n由于此时 Li\\rm L_iLi​ 必选 , 显然不可能\n\n\n选取 111 根满足长度限制的方案数为 000\n1∼i−1\\rm 1 \\sim i-11∼i−1 中选取 000 根且长度和超过 Li\\rm L_iLi​ , 显然不可能\n\n\n选取 111 根满足长度限制的方案数为 000\n1∼i−1\\rm 1 \\sim i-11∼i−1 中选取 111 根且长度和超过 Li\\rm L_iLi​\n∀1≤j&lt;i\\rm \\forall 1 \\leq j \\lt i∀1≤j&lt;i 都有 Lj≤Li\\rm L_j \\leq L_iLj​≤Li​\n显然不可能\n\n\n答案即为\n∑i=3n(2i−1−∑j=0Lidpi−1,j)\\rm \\sum_{i=3}^{n} \\Big(2^{i-1}  - \\sum_{j=0}^{L_i} dp_{i-1,j} \\Big)∑i=3n​(2i−1−∑j=0Li​​dpi−1,j​)\n若在求解 dpi,j\\rm dp_{i,j}dpi,j​ 时 j\\rm jj 的枚举上界为 ∑t=1iLi\\rm \\sum_{t=1}^i L_i∑t=1i​Li​ , 那么时间复杂度 O(n∑i=1nLi)\\rm O( n \\sum_{i=1}^{n} L_i  )O(n∑i=1n​Li​)\n最坏情况下计算量为 50003\\rm 5000^350003 无法通过全部的数据\n考虑优化\n注意到仅有 ∑j=0Lidpi−1,j\\rm \\sum_{j=0}^{L_i} dp_{i-1,j}∑j=0Li​​dpi−1,j​ 参与计算 , 那么 j&gt;V\\rm j \\gt Vj&gt;V 时的状态不参与计算\n那么递推时限制 j≤V\\rm j \\leq Vj≤V 即可\n时间复杂度 O(nV)\\rm O(n V)O(nV)\n可滚动数组优化 , 空间复杂度 O(V)\\rm O(V)O(V)\n 思路2\n将所有木棍 排序 后考虑\n此时 Li\\rm L_iLi​ 其必然为 L1∼i\\rm L_{1 \\sim i}L1∼i​ 中的最大值 , 若仅考虑 L1∼i\\rm L_{1 \\sim i}L1∼i​ 限制条件可改为 ∑j=1i−1Lj&gt;Li\\rm \\sum_{j=1}^{i-1} L_j \\gt L_i∑j=1i−1​Lj​&gt;Li​\n设 dpi,j,k\\rm dp_{i,j,k}dpi,j,k​ 表示考虑 L1∼i\\rm L_{1 \\sim i}L1∼i​ 选取总和为 j\\rm jj 的方案数 且 选取 k\\rm kk 根 的方案数\n分别考虑 Li\\rm L_iLi​ 是否选取\ndpi,j=dpi−1,j,k+dpi−1,j−Li,k−1\\rm dp_{i,j} = dp_{i-1,j,k} + dp_{i-1,j- L_i,k-1}dpi,j​=dpi−1,j,k​+dpi−1,j−Li​,k−1​\n考虑 L1∼i\\rm L_{1 \\sim i}L1∼i​ 且 一定选取 Li\\rm L_iLi​ 的合法方案数\n\n【考虑 L1∼i\\rm L_{1 \\sim i}L1∼i​ 且一定选取 Li\\rm L_iLi​ 】 等价于 【以 Li\\rm L_iLi​ 为最长木棍时的方案数】\n\n那么 考虑 L1∼i\\rm L_{1 \\sim i}L1∼i​ 且 一定选取 Li\\rm L_iLi​ 的合法方案数 为 $ \\displaystyle \\rm \\sum_{j = L_i + 1}^{ \\sum_{t=1}^i L_t} \\sum_{k=2}^i dp_{i-1,j,k} $\nwarning\n\n∑j=2Li+1∑t=1iLt∑k=3idpi,j,k\\displaystyle \\rm \\sum_{j = 2L_i + 1}^{ \\sum_{t=1}^i L_t} \\sum_{k=3}^i dp_{i,j,k}j=2Li​+1∑∑t=1i​Lt​​k=3∑i​dpi,j,k​ 并非 L1∼i\\rm L_{1 \\sim i}L1∼i​ 中一定选取 Li\\rm L_iLi​ 的方案数\n\ndpi,∗,∗\\rm dp_{i,*,*}dpi,∗,∗​ 中可能存在不选取 Li\\rm L_iLi​ 时的情况\n时间复杂度 O(n2∑i=1nLi)\\rm O(n^2\\sum_{i=1}^{n} L_i)O(n2∑i=1n​Li​)\n最坏情况下计算量为 50004\\rm 5000^450004 无法通过全部的数据\n可将 j&gt;V\\rm j \\gt Vj&gt;V 时的状态合并到 dpi,V+1,k\\rm dp_{i, V+1,k}dpi,V+1,k​\n可将 k&gt;3\\rm k \\gt 3k&gt;3 时的状态合并到 dpi,j,3\\rm dp_{i, j,3}dpi,j,3​\n那么答案即为\n∑i=1n∑j=Li+1V(dpi−1,j,2+dpi−1,j,3)\\displaystyle \\rm \\sum_{i=1}^n \\sum_{j=L_i+1}^V\\Big( dp_{i-1,j,2} + dp_{i-1,j,3} \\Big)\ni=1∑n​j=Li​+1∑V​(dpi−1,j,2​+dpi−1,j,3​)\n时间复杂度 O(nV)\\rm O(n V)O(nV)\n可滚动数组优化 , 空间复杂度 O(V)\\rm O(V)O(V)\n\nWrite the press release\nUpdate the website\nContact the media\n\n"}]